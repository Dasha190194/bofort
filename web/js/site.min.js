$(document).ready(function(){$("#login, #login-register, #login-button").on("click",function(){$.ajax({url:"/user/login",type:"GET",success:function(c){$(".modal-content").html(c);$("#my-modal").modal({show:true})}})});$("body").on("submit","#login-form",function(d){d.preventDefault();var c=$(this);$.ajax({url:"/user/login",type:"POST",data:c.serialize(),success:function(e){$(".modal-content").html(e)}})});$("#my-modal").on("click","#registration",function(){var c=window.location.pathname;if(c!="/"){localStorage.setItem("makeRegistration",true);window.location.replace("/")}else{$("#my-modal").modal("hide");$("html,body").animate({scrollTop:document.body.scrollHeight},"slow")}});if(localStorage.getItem("makeRegistration")!=null){$("html,body").animate({scrollTop:document.body.scrollHeight},"slow");localStorage.removeItem("makeRegistration")}$(".service").on("click",function(){var c=$(this);var g=c.data("id");var f=$("#payform-order_id").val();var d=$("#payform-services");var e=d.val();if(c.hasClass("active")){$.ajax({url:"/order/remove-service",type:"GET",data:{order_id:f,service_id:g},success:function(h){e=e.split(",");e=a(e,g);e=(e.length===0)?"":e.join(",");d.val(e);c.removeClass("active");$("#toPay").html(h)}})}else{$.ajax({url:"/order/add-service",type:"GET",data:{order_id:f,service_id:g},success:function(h){e=(e.length!==0)?e.split(","):[];e.push(g);d.val(e.join(","));c.addClass("active");$("#toPay").html(h)}})}});$("#promo-apply").on("click",function(){$.ajax({url:"/order/apply-promo",type:"GET",data:{order_id:$("#payform-order_id").val(),word:$("#word").val()},success:function(c){if(c==false){alert("Не удалось применить промокод!")}location.reload()}})});$("#show-carousel-modal").on("click",function(){$("#carousel-modal").modal({show:true});$("#carousel").carousel()});function b(c){$.ajax({url:"/order/refund",type:"GET",data:{id:c},success:function(d){location.reload()}})}$(".order-refund").on("click",function(){if(confirm("Вы уверены, что хотите вернуть заказ?")){var c=$(this).data("id");b(c)}});function a(c,d){return c.filter(function(e){return e!=d})}});